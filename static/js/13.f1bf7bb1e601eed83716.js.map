{"version":3,"sources":["webpack:///./src/config/filterDate.js","webpack:///src/pages/yunlipipei/yunliShipDetail.vue","webpack:///./src/pages/yunlipipei/yunliShipDetail.vue?f306","webpack:///./src/pages/yunlipipei/yunliShipDetail.vue"],"names":["dateFormat","fmt","date","ret","opt","Y+","getFullYear","toString","m+","getMonth","d+","getDate","H+","getHours","M+","getMinutes","S+","getSeconds","k","RegExp","exec","replace","length","padStart","yunliShipDetail","data","map","point","currentTime","columns1","title","key","width","align","columns2","data1","data2","currentPage","currentPage1","size","size1","total","total1","shipInfo","lastVoyage","createTime","loadPort","discPort","cargo","tons","methods","getShipHistory","_this","this","postData","mmsi","$route","query","$http","then","res","status","post","result","Array","postime","points","promise_default","a","resolve","reject","index","BMap","Point","lng","lat","center","Math","ceil","initMapNew","Date","filterDate","setTimeout","initNoship","_date","_this2","Map","centerAndZoom","top_left_navigation","NavigationControl","addControl","sy","Symbol","BMap_Symbol_SHAPE_BACKWARD_OPEN_ARROW","scale","strokeColor","strokeWeight","icons","IconSequence","drawLine","myIcon","Icon","Size","anchor","len","p","marker","Marker","icon","addOverlay","setAnimation","BMAP_ANIMATION_BOUNCE","setMapStyle","styleJson","featureType","elementType","stylers","visibility","color","opts","position","offset","label","Label","height","setStyle","fontSize","lineHeight","fontFamily","curve","Polyline","strokeOpacity","changePage","type","hisCoorperation","hisLine","sizeChange","getShipInfo","_this3","asyncToGenerator_default","regenerator_default","mark","_callee","wrap","_context","prev","next","shipInfoAndLostPosition","sent","stop","_this4","_callee2","_context2","shipHistoryOrder","forEach","item","push","Index","Number","shipLine","discPorts","loadPorts","name","contactName","cargoTons","freight","freights","_this5","_callee3","_context3","shipHistoryVoyage","starDate","route","mounted","created","yunlipipei_yunliShipDetail","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","span","_s","shipName","shipOwnerName","phone","staticStyle","ref","id","border","columns","current","page-size","show-elevator","show-sizer","on","on-page-size-change","$event","on-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/13.f1bf7bb1e601eed83716.js","sourcesContent":["/**\n * 格式化日期\n * @param {} fmt 返回的值\n * @param {} date 传入的时间\n * @return fmt\n */\n// fmt 指定的格式 YYYY/mm/dd HH:MM:SS YYYY-mm-dd HH:MM:SS\n// date 传入的时间\nconst dateFormat = function (fmt, date) {\n  let ret;\n  let opt = {\n    \"Y+\": date.getFullYear().toString(), // 年\n    \"m+\": (date.getMonth() + 1).toString(), // 月\n    \"d+\": date.getDate().toString(), // 日\n    \"H+\": date.getHours().toString(), // 时\n    \"M+\": date.getMinutes().toString(), // 分\n    \"S+\": date.getSeconds().toString() // 秒\n    // 有其他格式化字符需求可以继续添加，必须转化成字符串\n  };\n  for (let k in opt) {\n    ret = new RegExp(\"(\" + k + \")\").exec(fmt);\n    if (ret) {\n      fmt = fmt.replace(\n        ret[1],\n        ret[1].length == 1 ? opt[k] : opt[k].padStart(ret[1].length, \"0\")\n      );\n    }\n  }\n   return fmt;\n}\n\nexport default dateFormat\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/filterDate.js","<template>\n  <Card class=\"card\">\n    <Breadcrumb>\n      <BreadcrumbItem>运力匹配</BreadcrumbItem>\n      <BreadcrumbItem>船舶详情</BreadcrumbItem>\n    </Breadcrumb>\n    <Row class=\"box-container\">\n      <Row>\n        <Col span=\"1\">船舶</Col>\n        <Col span=\"8\">{{shipInfo.shipName}}/{{shipInfo.mmsi}}</Col>\n        <Col span=\"1\">船东</Col>\n        <Col span=\"8\">{{shipInfo.shipOwnerName}} /{{shipInfo.phone}} </Col>\n      </Row>\n      <Row style=\"position:relative\">\n        <div style id=\"map\" ref=\"map\"></div>\n        <h3 class=\"infoWindow\">更新日期 {{currentTime}}</h3>\n      </Row>\n      <Divider />\n      <h3>最新航次</h3>\n      <Row class=\"row\">\n        <Col span=\"1\">日期</Col>\n        <Col span=\"5\">{{ shipInfo.lastVoyage.data ? shipInfo.lastVoyage.data :'-'}}</Col>\n        <Col span=\"1\">航线</Col>\n        <Col span=\"15\">{{ shipInfo.lastVoyage.route }}</Col>\n      </Row>\n      <Divider />\n      <h3>历史合作</h3>\n      <Row class=\"row\">\n        <Table border :columns=\"columns1\" :data=\"data1\"></Table>\n        <Page\n          :total=\"total\"\n          @on-page-size-change=\"sizeChange($event,1)\"\n          class=\"pages\"\n          @on-change=\"changePage($event,1)\"\n          :current=\"currentPage\"\n          :page-size=\"size\"\n          show-elevator\n          show-sizer\n        />\n      </Row>\n      <h3>历史航线</h3>\n      <Row class=\"row\">\n        <Table border :columns=\"columns2\" :data=\"data2\"></Table>\n        <Page\n          :total=\"total1\"\n          @on-page-size-change=\"sizeChange($event,2)\"\n          class=\"pages\"\n          @on-change=\"changePage($event,2)\"\n          :current=\"currentPage1\"\n          :page-size=\"size1\"\n          show-elevator\n          show-sizer\n        />\n      </Row>\n    </Row>\n  </Card>\n</template>\n<script>\nimport dateFormat from '@/config/filterDate'\nexport default {\n  data() {\n    return {\n      map: {},\n      point: \"\",\n      currentTime: \"\",\n      columns1: [\n        {\n          title: \"#\",\n          key: \"Index\",\n          width: 60,\n          align: \"center\"\n        },\n        {\n          title: \"日期\",\n          key: \"date\",\n          align: \"center\"\n        },\n        {\n          title: \"航线\",\n          key: \"shipLine\",\n          align: \"center\"\n        },\n        {\n          title: \"货主\",\n          key: \"name\",\n          align: \"center\"\n        },\n        {\n          title: \"货种\",\n          key: \"cargo\",\n          align: \"center\"\n        },\n        {\n          title: \"吨位\",\n          key: \"tons\",\n          align: \"center\"\n        },\n        {\n          title: \"运价\",\n          key: \"freight\",\n          align: \"center\"\n        }\n      ],\n      columns2: [\n        {\n          title: \"#\",\n          key: \"Index\",\n          width: 60,\n          align: \"center\"\n        },\n        {\n          title: \"日期\",\n          key: \"starDate\",\n          align: \"center\",\n          width:200\n        },\n\n        {\n          title: \"航线\",\n          key: \"shipLine\",\n          align: \"center\"\n        },\n      ],\n      data1: [],\n      data2:[],\n      currentPage: 1,\n      currentPage1: 1,\n      size: 10,\n      size1: 10,\n      total: 10,\n      total1: 10,\n      shipInfo:{\n        lastVoyage:{\n           createTime:'',\n           loadPort:'',\n           discPort:\"\",\n           cargo:'',\n           tons:''\n        }\n      },\n\n    };\n  },\n  methods: {\n    // 获取轨迹信息\n    getShipHistory() {\n      let postData = {\n        mmsi: this.$route.query.mmsi\n      }\n      this.$http.getShipHistory(postData).then(res => {\n        if (res.data.status == 0) {\n          let post =res.data.result\n          if(post instanceof Array && post.length){\n            this.currentTime = post[post.length-1].postime\n          }\n            let points = []\n            if(post){\n              let p = new Promise((resolve,reject)=>{\n                post.map((key, index) => {\n                  points[index] =  new BMap.Point(key.lng, key.lat)\n                });\n                  resolve(points)\n              }).then(res=>{\n                let center = points[Math.ceil(points.length / 2)];\n                this.initMapNew(res, center)\n              })\n            }\n            else{\n              let date = new Date();\n              this.currentTime =  dateFormat('YYYY/mm/dd HH:MM:SS',date)\n                setTimeout(() => {\n                    this.initNoship();\n                  }, 100);\n            }\n        } else {\n          setTimeout(() => {\n            this.initNoship();\n          }, 100);\n            let date = new Date();\n            this.currentTime =  dateFormat('YYYY/mm/dd HH:MM:SS',date)\n        }\n      });\n    },\n    //初始化地图\n    initMapNew(points, center) {\n      this.map = new BMap.Map(\"map\");\n      this.map.centerAndZoom(center, 8);\n      var top_left_navigation = new BMap.NavigationControl();  //左上角，添加默认缩放平移控件\n      this.map.addControl(top_left_navigation);\n      var sy = new BMap.Symbol(BMap_Symbol_SHAPE_BACKWARD_OPEN_ARROW, {\n        scale: 0.7, //图标缩放大小\n        strokeColor: \"#fff\", //设置矢量图标的线填充颜色\n        strokeWeight: \"2\" //设置线宽\n      });\n      var icons = new BMap.IconSequence(sy, \"10\", \"30\");\n      this.point = points;\n      setTimeout(() => {\n        this.drawLine(icons);\n      }, 1000);\n      var myIcon = new BMap.Icon(\"http://feiyuhuopanguanjia.oss-cn-hangzhou.aliyuncs.com/houtai/ships.png\",\n       new BMap.Size(50,50),{\n           anchor: new BMap.Size(10, 10)//这句表示图片相对于所加的点的位置mapStart\n        });\n      let len = points.length-1\n      let p =  new BMap.Point(points[len].lng, points[len].lat);\n      let marker = new BMap.Marker(p,{icon:myIcon});  // 创建标注\n      this.map .addOverlay(marker);               // 将标注添加到地图中\n        marker.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画\n      this.map.setMapStyle({\n        styleJson: [\n          {\n            featureType: \"road\",\n            elementType: \"all\",\n            stylers: {\n              visibility: \"off\"\n            }\n          },\n          {\n            featureType: \"water\",\n            elementType: \"all\",\n            stylers: {\n              color: \"#afdafc\"\n            }\n          },\n          {\n            featureType: \"districtlabel\",\n            elementType: \"all\",\n            stylers: {}\n          }\n        ]\n      });\n    },\n\n    // 暂无轨迹\n    initNoship() {\n      // 百度地图API功能\n      var map = new BMap.Map(\"map\");\n      var point = new BMap.Point(116.4035, 39.915);\n      map.centerAndZoom(point, 8);\n      var top_left_navigation = new BMap.NavigationControl();  //左上角，添加默认缩放平移控件\n      map.addControl(top_left_navigation);\n      var opts = {\n        position: point, // 指定文本标注所在的地理位置\n        offset: new BMap.Size(260, -130) //设置文本偏移量\n      };\n      var label = new BMap.Label(\"暂无轨迹信息\", opts); // 创建文本标注对象\n\n      var opts = {\n        width: 250, // 信息窗口宽度\n        height: 100, // 信息窗口高度\n        title: \"Hello\" // 信息窗口标题\n      };\n\n      label.setStyle({\n        color: \"red\",\n        fontSize: \"14px\",\n        height: \"20px\",\n        lineHeight: \"20px\",\n        fontFamily: \"微软雅黑\"\n      });\n      map.addOverlay(label);\n      map.setMapStyle({\n        styleJson: [\n          {\n            featureType: \"road\",\n            elementType: \"all\",\n            stylers: {\n              visibility: \"off\"\n            }\n          },\n          {\n            featureType: \"water\",\n            elementType: \"all\",\n            stylers: {\n              color: \"#afdafc\"\n            }\n          },\n          {\n            featureType: \"districtlabel\",\n            elementType: \"all\",\n            stylers: {}\n          }\n        ]\n      });\n    },\n    drawLine(icons){\n      var curve = new BMap.Polyline(this.point, {\n        strokeColor: \"blue\",\n        strokeWeight: 3,\n        strokeOpacity: 0.5,\n        icons: [icons]\n      }); //创建弧线对象\n      this.map.addOverlay(curve); //添加到地图中\n    },\n\n    changePage(currentPage,type) {\n      if(type==1){\n        this.currentPage = currentPage;\n        this.hisCoorperation()\n      }\n      else{\n        this.currentPage1 = currentPage;\n        this.hisLine()\n\n      }\n    },\n    sizeChange(size,type) {\n      if(type==1){\n             this.size = size;\n             this.hisCoorperation()\n      }\n      else{\n           this.size1 = size;\n           this.hisLine()\n      }\n\n    },\n    // 船舶详情\n   async getShipInfo(){\n      let res = await this.$http.shipInfoAndLostPosition({mmsi:this.$route.query.mmsi})\n      if(!res.data.status){\n        this.shipInfo = res.data.result\n      }\n    },\n    // 历史合作\n   async hisCoorperation(){\n     let res = await this.$http.shipHistoryOrder({mmsi:this.$route.query.mmsi,currentPage:this.currentPage,size:this.size})\n     this.data1 = []\n     this.total = res.data.total\n     if(0===res.data.status){\n       let result = res.data.result\n       result.forEach((item,index)=>{\n          this.data1.push({\n               Index:Number((this.currentPage-1)*this.size)+Number(index)+1,\n               date:item.createTime,\n               shipLine:item.discPorts+'——' + item.loadPorts,\n               name:item.contactName,\n               cargo:item.cargo,\n               tons:item.cargoTons,\n               freight:item.freights\n          })\n       })\n     }\n    },\n    // 历史航线\n    async hisLine(){\n     let res = await this.$http.shipHistoryVoyage({mmsi:this.$route.query.mmsi,currentPage:this.currentPage1,size:this.size1})\n      this.data2 = []\n      this.total1 = res.data.total\n      if(0===res.data.status){\n       let result = res.data.result\n       result.forEach((item,index)=>{\n          this.data2.push({\n               Index:Number((this.currentPage1-1)*this.size1)+Number(index)+1,\n               starDate:item.data ,\n               shipLine:item.route ,\n          })\n       })\n     }\n    },\n  },\n  mounted() {\n    this.getShipHistory();\n  },\n  created(){\n    this.getShipInfo()\n    this.hisCoorperation()\n    this.hisLine()\n\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n>>> .anchorBL {\n  display: none;\n}\n#map {\n  width: 100%;\n  height: 550px;\n  border: 1px solid #e8eaec;\n  margin: 30px 0;\n}\n.infoWindow {\n  position: absolute;\n  top: 40px;\n  left:40px;\n  z-index: 1000;\n  color: red;\n  width: 300px;\n  height: 50px;\n  line-height: 50px;\n  text-align: center;\n  border-radius: 5px;\n}\n.row {\n  line-height: 45px;\n  margin: 20px 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/yunlipipei/yunliShipDetail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Card',{staticClass:\"card\"},[_c('Breadcrumb',[_c('BreadcrumbItem',[_vm._v(\"运力匹配\")]),_vm._v(\" \"),_c('BreadcrumbItem',[_vm._v(\"船舶详情\")])],1),_vm._v(\" \"),_c('Row',{staticClass:\"box-container\"},[_c('Row',[_c('Col',{attrs:{\"span\":\"1\"}},[_vm._v(\"船舶\")]),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"8\"}},[_vm._v(_vm._s(_vm.shipInfo.shipName)+\"/\"+_vm._s(_vm.shipInfo.mmsi))]),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"1\"}},[_vm._v(\"船东\")]),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"8\"}},[_vm._v(_vm._s(_vm.shipInfo.shipOwnerName)+\" /\"+_vm._s(_vm.shipInfo.phone)+\" \")])],1),_vm._v(\" \"),_c('Row',{staticStyle:{\"position\":\"relative\"}},[_c('div',{ref:\"map\",attrs:{\"id\":\"map\"}}),_vm._v(\" \"),_c('h3',{staticClass:\"infoWindow\"},[_vm._v(\"更新日期 \"+_vm._s(_vm.currentTime))])]),_vm._v(\" \"),_c('Divider'),_vm._v(\" \"),_c('h3',[_vm._v(\"最新航次\")]),_vm._v(\" \"),_c('Row',{staticClass:\"row\"},[_c('Col',{attrs:{\"span\":\"1\"}},[_vm._v(\"日期\")]),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"5\"}},[_vm._v(_vm._s(_vm.shipInfo.lastVoyage.data ? _vm.shipInfo.lastVoyage.data :'-'))]),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"1\"}},[_vm._v(\"航线\")]),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"15\"}},[_vm._v(_vm._s(_vm.shipInfo.lastVoyage.route))])],1),_vm._v(\" \"),_c('Divider'),_vm._v(\" \"),_c('h3',[_vm._v(\"历史合作\")]),_vm._v(\" \"),_c('Row',{staticClass:\"row\"},[_c('Table',{attrs:{\"border\":\"\",\"columns\":_vm.columns1,\"data\":_vm.data1}}),_vm._v(\" \"),_c('Page',{staticClass:\"pages\",attrs:{\"total\":_vm.total,\"current\":_vm.currentPage,\"page-size\":_vm.size,\"show-elevator\":\"\",\"show-sizer\":\"\"},on:{\"on-page-size-change\":function($event){return _vm.sizeChange($event,1)},\"on-change\":function($event){return _vm.changePage($event,1)}}})],1),_vm._v(\" \"),_c('h3',[_vm._v(\"历史航线\")]),_vm._v(\" \"),_c('Row',{staticClass:\"row\"},[_c('Table',{attrs:{\"border\":\"\",\"columns\":_vm.columns2,\"data\":_vm.data2}}),_vm._v(\" \"),_c('Page',{staticClass:\"pages\",attrs:{\"total\":_vm.total1,\"current\":_vm.currentPage1,\"page-size\":_vm.size1,\"show-elevator\":\"\",\"show-sizer\":\"\"},on:{\"on-page-size-change\":function($event){return _vm.sizeChange($event,2)},\"on-change\":function($event){return _vm.changePage($event,2)}}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-58d8e035\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/yunlipipei/yunliShipDetail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-58d8e035\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./yunliShipDetail.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./yunliShipDetail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./yunliShipDetail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-58d8e035\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./yunliShipDetail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-58d8e035\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/yunlipipei/yunliShipDetail.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}