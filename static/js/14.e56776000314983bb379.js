webpackJsonp([14],{DZfX:function(t,e){},JDQT:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Xxa5"),s=a.n(r),n=a("exGp"),o=a.n(n),l={data:function(){return{value1:"1",value2:"2",result:"",freight:"",portFee:"",workArea:"",long:"",width:"",starTime:"",endTime:"",reason:"",lineStatus:0}},methods:{portDetail:function(){var t=this;return o()(s.a.mark(function e(){var a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={portCode:t.$route.query.code},e.prev=1,e.next=4,t.$http.portDetail(a);case 4:0==(r=e.sent).data.status&&(t.result=r.data.result,t.freight=r.data.result.shipDraught,t.width=r.data.result.shipBreadth,t.long=r.data.result.shipLength,t.portFee=r.data.result.usageFee,t.reason=r.data.result.stopReason,t.starTime=r.data.result.startDate?r.data.result.startDate.slice(0,10):"",t.endTime=r.data.result.endDate?r.data.result.endDate.slice(0,10):"",t.lineStatus=r.data.result.stopStatus,t.workArea=r.data.result.polygnIndex),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),t.$Notice.error({desc:"服务器错误,请稍后重试."}),Error(e.t0);case 12:case"end":return e.stop()}},e,t,[[1,8]])}))()},dateFormat:function(t){return t.getFullYear().toString()+"/"+(t.getMonth()>=9?(t.getMonth()+1).toString():"0"+(t.getMonth()+1))+"/"+(t.getDate()>=9?t.getDate().toString():"0"+t.getDate())},save:function(){var t=this;return o()(s.a.mark(function e(){var a,r,n,o,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new Date(t.starTime).getTime()<=new Date(t.endTime).getTime(),r=t.starTime.toLocaleString().includes(" ")?t.starTime.toLocaleString().slice(0,10):t.starTime,n=t.endTime.toLocaleString().includes(" ")?t.endTime.toLocaleString().slice(0,10):t.endTime,""==t.starTime&&""==t.endTime&&(a=!0),!a){e.next=25;break}return o={portCode:t.$route.query.code,shipDraught:t.freight,shipBreadth:t.width,shipLength:t.long,portUsageFee:t.portFee,stopReason:t.reason,startDate:r,endDate:n,polygn:t.workArea,stopStatus:t.lineStatus},e.prev=6,e.next=9,t.$http.updatePort(o);case 9:if((l=e.sent).data.status){e.next=15;break}t.$Notice.success({desc:"保存成功"}),setTimeout(function(){var e=t.$router.resolve({path:"/portCenter/portdetail",query:{code:t.$route.query.code}}).href;window.open(e,"_blank")},1300),e.next=17;break;case 15:return t.$Notice.error({desc:l.data.msg}),e.abrupt("return",!1);case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),t.$Notice.error({desc:"服务器错误,请稍后重试."}),console.log(e.t0);case 23:e.next=27;break;case 25:return t.$Notice.error({desc:"开始时间不能大于结束时间"}),e.abrupt("return");case 27:case"end":return e.stop()}},e,t,[[6,19]])}))()},tab:function(t){this.lineStatus=t},dateChange:function(t,e){1==e?this.starTime=t:this.endTime=t}},created:function(){this.portDetail()}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",{staticClass:"card"},[a("Breadcrumb",[a("BreadcrumbItem",[t._v("港口管理")]),t._v(" "),a("BreadcrumbItem",[t._v("修改港口信息")])],1),t._v(" "),a("div",{staticClass:"box-container"},[a("Collapse",{attrs:{accordion:""},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}},[a("Panel",{attrs:{name:"1"}},[a("span",[t._v("港口基本信息")]),t._v(" "),a("Row",{staticClass:"row",attrs:{slot:"content"},slot:"content"},[a("Col",{attrs:{span:"3"}},[t._v("港口")]),t._v(" "),a("Col",{attrs:{span:"6"}},[t._v(t._s(t.result.port?t.result.port:"-"))]),t._v(" "),a("Col",{attrs:{span:"3"}},[t._v("港口使用费")]),t._v(" "),a("Col",{attrs:{span:"6"}},[a("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入港口使用费"},model:{value:t.portFee,callback:function(e){t.portFee=e},expression:"portFee"}})],1)],1),t._v(" "),a("Row",{staticClass:"row",attrs:{slot:"content"},slot:"content"},[a("Col",{attrs:{span:"3"}},[t._v("吃水")]),t._v(" "),a("Col",{attrs:{span:"6"}},[a("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入吃水"},model:{value:t.freight,callback:function(e){t.freight=e},expression:"freight"}})],1),t._v(" "),a("Col",{attrs:{span:"3"}},[t._v("港口作业区")]),t._v(" "),a("Col",{attrs:{span:"6"}},[a("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入港口作业区"},model:{value:t.workArea,callback:function(e){t.workArea=e},expression:"workArea"}})],1)],1),t._v(" "),a("Row",{staticClass:"row",attrs:{slot:"content"},slot:"content"},[a("Col",{attrs:{span:"3"}},[t._v("船长限制")]),t._v(" "),a("Col",{attrs:{span:"6"}},[a("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入船长限制"},model:{value:t.long,callback:function(e){t.long=e},expression:"long"}})],1),t._v(" "),a("Col",{attrs:{span:"3"}},[t._v("船宽限制")]),t._v(" "),a("Col",{attrs:{span:"6"}},[a("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入船宽限制"},model:{value:t.width,callback:function(e){t.width=e},expression:"width"}})],1)],1),t._v(" "),a("Row",{staticClass:"row",attrs:{slot:"content"},slot:"content"},[a("Col",{attrs:{span:"3"}},[t._v("封航状态")]),t._v(" "),a("Col",{attrs:{span:"6"}},[a("ButtonGroup",[a("Button",{attrs:{type:0==t.lineStatus?"primary":"default"},on:{click:function(e){return t.tab(0)}}},[t._v("是")]),t._v(" "),a("Button",{attrs:{type:1==t.lineStatus?"primary":"default"},on:{click:function(e){return t.tab(1)}}},[t._v("否")])],1)],1)],1),t._v(" "),a("Row",{staticClass:"row",attrs:{slot:"content"},slot:"content"},[a("Col",{attrs:{span:"3"}},[t._v("封航/停止作业开始时间")]),t._v(" "),a("Col",{attrs:{span:"6"}},[a("DatePicker",{staticStyle:{width:"220px"},attrs:{type:"date",placeholder:"封航/停止作业开始时间",format:"yyyy/MM/dd"},on:{"on-change":function(e){return t.dateChange(e,1)}},model:{value:t.starTime,callback:function(e){t.starTime=e},expression:"starTime"}})],1),t._v(" "),a("Col",{attrs:{span:"3"}},[t._v("封航/停止作业结束时间")]),t._v(" "),a("Col",{attrs:{span:"6"}},[a("DatePicker",{staticStyle:{width:"220px"},attrs:{type:"date",placeholder:"封航/停止作业结束时间",format:"yyyy/MM/dd"},on:{"on-change":function(e){return t.dateChange(e,2)}},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)],1),t._v(" "),a("Row",{staticClass:"row",attrs:{slot:"content"},slot:"content"},[a("Col",{attrs:{span:"3"}},[t._v("封航/停止作业原因")]),t._v(" "),a("Col",{attrs:{span:"6"}},[a("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入封航原因"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1)],1),t._v(" "),a("Row",{staticClass:"row",attrs:{slot:"content"},slot:"content"},[a("Divider")],1),t._v(" "),a("Row",{staticClass:"row",attrs:{slot:"content"},slot:"content"},[a("Button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(l,i,!1,function(t){a("DZfX")},"data-v-51fb1d2c",null);e.default=c.exports}});
//# sourceMappingURL=14.e56776000314983bb379.js.map