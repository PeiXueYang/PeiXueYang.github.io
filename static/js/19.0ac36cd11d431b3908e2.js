webpackJsonp([19],{i6h5:function(t,e){},smRs:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("woOf"),n=r.n(a),o=r("Xxa5"),s=r.n(o),c=r("exGp"),i=r.n(c),l={data:function(){return{value1:"1",switch1:!0,cargoList:[],cargoInfo:{type:"",cargo:""},formInline:{type:"",cargo:""},ruleInline:{type:[{required:!0,message:"请输入货种种类",trigger:"blur"}],cargo:[{required:!0,message:"请输入货种名称",trigger:"blur"}]}}},methods:{handleSubmit:function(t){var e,r=this;this.$refs[t].validate((e=i()(s.a.mark(function t(e){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=7;break}return t.next=3,r.$http.AddCargo({cargoType:r.formInline.type,cargo:r.formInline.cargo,code:""});case 3:(a=t.sent).data.status||(r.$Notice.info({desc:a.data.msg}),r.formInline.type="",r.formInline.cargo="",r.getAllCargoType()),t.next=7;break;case 7:case"end":return t.stop()}},t,r)})),function(t){return e.apply(this,arguments)}))},editor:function(t){this.cargoList[t].isEditor=!0},cancel:function(t){this.cargoList[t].isEditor=!1},save:function(t,e,r,a){var n=this;return i()(s.a.mark(function o(){var c;return s.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.$http.AddCargo({cargoType:t,cargo:e,code:r});case 2:(c=o.sent).data.status||(n.cargoList[a].isEditor=!1,n.getAllCargoType()),n.$Notice.info({desc:c.data.msg});case 5:case"end":return o.stop()}},o,n)}))()},getAllCargoType:function(){var t=this;return i()(s.a.mark(function e(){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.getAllCargoType();case 2:r=e.sent,t.cargoList=[],r.data.status?t.cargoList=[]:r.data.result.map(function(e,r){t.cargoList.push(n()({},e,{isEditor:!1,isOpen:1==e.status}))});case 5:case"end":return e.stop()}},e,t)}))()},changeSwitch:function(t,e,r){var a=this;return i()(s.a.mark(function r(){var n;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.$http.updateCargoType({cargoCode:e,status:t?1:0});case 2:!(n=r.sent).data.status&&t?(a.$Notice.success({desc:"开启成功"}),a.getAllCargoType()):n.data.status||t?a.$Notice.error({desc:"操作成功"}):(a.$Notice.success({desc:"禁用成功"}),a.getAllCargoType());case 4:case"end":return r.stop()}},r,a)}))()}},created:function(){this.getAllCargoType()}},u={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{staticClass:"card"},[r("Breadcrumb",[r("BreadcrumbItem",[t._v("市场管理")]),t._v(" "),r("BreadcrumbItem",[t._v("添加货种")])],1),t._v(" "),r("div",{staticClass:"box-container"},[r("Collapse",{model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}},[r("Panel",{attrs:{name:"1"}},[t._v("\n              货种基本信息\n              "),r("Row",{attrs:{slot:"content"},slot:"content"},[r("Col",{attrs:{span:"1"}},[t._v("货种")]),t._v(" "),r("Col",{attrs:{span:"20"}},[r("Form",{ref:"formInline",attrs:{model:t.formInline,rules:t.ruleInline,inline:""}},[r("FormItem",{attrs:{prop:"type"}},[r("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入货种种类"},model:{value:t.formInline.type,callback:function(e){t.$set(t.formInline,"type",e)},expression:"formInline.type"}})],1),t._v(" "),r("FormItem",{attrs:{prop:"cargo"}},[r("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入货种名称"},model:{value:t.formInline.cargo,callback:function(e){t.$set(t.formInline,"cargo",e)},expression:"formInline.cargo"}})],1),t._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formInline",1)}}},[t._v("添加")])],1)],1)],1)],1),t._v(" "),r("Row",{attrs:{slot:"content"},slot:"content"},[r("table",{staticClass:"table table-row"},[r("tr",[r("td",[t._v("货种种类")]),t._v(" "),r("td",[t._v("货种名称")]),t._v(" "),r("td",[t._v("操作")])]),t._v(" "),t._l(t.cargoList,function(e,a){return r("tr",{key:a},[e.isEditor?t._e():r("td",[t._v(t._s(e.type))]),t._v(" "),e.isEditor?t._e():r("td",[t._v(t._s(e.cargo))]),t._v(" "),e.isEditor?r("td",[r("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"请输入货种种类"},model:{value:e.type,callback:function(r){t.$set(e,"type",r)},expression:"item.type"}})],1):t._e(),t._v(" "),e.isEditor?r("td",[r("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"请输入货种名称"},model:{value:e.cargo,callback:function(r){t.$set(e,"cargo",r)},expression:"item.cargo"}})],1):t._e(),t._v(" "),r("td",[e.isEditor?r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(r){return t.save(e.type,e.cargo,e.code,a)}}},[t._v("保存")]):r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.editor(a)}}},[t._v("修改")]),t._v(" "),e.isEditor?r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.cancel(a)}}},[t._v("取消")]):t._e(),t._v(" "),r("i-switch",{on:{"on-change":function(r){return t.changeSwitch(r,e.code,a)}},model:{value:e.isOpen,callback:function(r){t.$set(e,"isOpen",r)},expression:" item.isOpen "}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v("启用")]),t._v(" "),r("span",{attrs:{slot:"close"},slot:"close"},[t._v("禁用")])])],1)])})],2)])],1)],1)],1)],1)},staticRenderFns:[]};var p=r("VU/8")(l,u,!1,function(t){r("i6h5")},"data-v-04586f17",null);e.default=p.exports}});
//# sourceMappingURL=19.0ac36cd11d431b3908e2.js.map