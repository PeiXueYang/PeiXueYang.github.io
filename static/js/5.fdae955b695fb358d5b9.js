webpackJsonp([5],{"5zde":function(t,e,r){r("zQR9"),r("qyJz"),t.exports=r("FeBl").Array.from},Gu7T:function(t,e,r){"use strict";e.__esModule=!0;var a,n=r("c/Tr"),s=(a=n)&&a.__esModule?a:{default:a};e.default=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return(0,s.default)(t)}},"c/Tr":function(t,e,r){t.exports={default:r("5zde"),__esModule:!0}},fBQ2:function(t,e,r){"use strict";var a=r("evD5"),n=r("X8DO");t.exports=function(t,e,r){e in t?a.f(t,e,n(0,r)):t[e]=r}},jISy:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("woOf"),n=r.n(a),s=r("Xxa5"),o=r.n(s),i=r("Gu7T"),c=r.n(i),l=r("exGp"),d=r.n(l),u={data:function(){return{cargo:"",Panelkey:"",value1:"1",showModal:!1,lineArr:[{loadPort:"",discPort:"",freight:"",p:""}],goodsInfo:[],starLine:"",endLine:"",price:"",zFu:""}},methods:{addGoods:function(){this.showModal=!0},ok:function(){var t=this;return d()(o.a.mark(function e(){var r,a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[{loadPort:"",discPort:"",freight:"",p:""}],a={cargo:t.cargo,marketFreight:[].concat(c()(t.lineArr))},e.prev=2,e.next=5,t.$http.addCargo(a);case 5:0==(n=e.sent).data.status?(t.$Notice.success({desc:"添加成功"}),t.cargo="",t.lineArr=r,t.getCargoInfo(1e3)):t.$Notice.error({desc:n.data.msg}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,t,[[2,9]])}))()},cancel:function(){this.cargo="",this.lineArr=[{loadPort:"",discPort:"",freight:"",p:""}]},addPlus:function(){this.lineArr.push({loadPort:"",discPort:"",freight:"",p:""})},minusPlus:function(t){this.lineArr.splice(t,1)},getCargoInfo:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return d()(o.a.mark(function r(){var a,s,i,c;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$http.getCargoInfo();case 2:if(a=r.sent,t.goodsInfo=[],s=a.data.result,0==a.data.status){for(i in s)for(c in s[i].marketFreights)s[i].marketFreights[c].isEditor=!1,s[i].marketFreights[c].starLine=s[i].marketFreights[c].airway?s[i].marketFreights[c].airway.split("-")[0]:"",s[i].marketFreights[c].endLine=s[i].marketFreights[c].airway?s[i].marketFreights[c].airway.split("-")[1]:"",s[i].marketFreights[c].date=s[i].marketFreights[c].createTime?s[i].marketFreights[c].createTime.split(" ")[0]:"",s[i].marketFreights[c].time=s[i].marketFreights[c].createTime?s[i].marketFreights[c].createTime.split(" ")[1]:"";t.goodsInfo=[],s.map(function(e,r){t.goodsInfo.push(n()({},e,{value:r+1+"",starLine:"",endLine:"",zFu:"",price:"",isCollapse:!1}))}),1e3!=e&&(t.goodsInfo[e].isCollapse=!0,t.goodsInfo[e].value=e+1+"",t.$refs.Panelkey[e].isActive=!0)}else t.$Notice.error({desc:"暂无数据"});case 6:case"end":return r.stop()}},r,t)}))()},handleEditor:function(t,e){this.goodsInfo[t].marketFreights[e].isEditor=!0},save:function(t,e,r,a){var n=this;return d()(o.a.mark(function s(){var i,c,l,d,u,p,f;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return i=n.goodsInfo[t].marketFreights[e],i.time,c=i.endLine,l=i.starLine,d=i.freight,u=i.priceGain,p={cargo:a,marketFreightId:r,route:l+"-"+c,freight:d,priceGain:u},s.prev=2,s.next=5,n.$http.updateCargoInfoByCargo(p);case 5:if(0!=(f=s.sent).data.status){s.next=11;break}n.$Notice.success({desc:"修改成功"}),n.getCargoInfo(t),s.next=13;break;case 11:return n.$Notice.error({desc:f.data.msg}),s.abrupt("return",!1);case 13:s.next=19;break;case 15:throw s.prev=15,s.t0=s.catch(2),n.$Notice.error({desc:"捕获异常."}),Error(s.t0);case 19:case"end":return s.stop()}},s,n,[[2,15]])}))()},handleDate:function(t,e,r,a){"date"==a?this.goodsInfo[e].marketFreights[r].date=t:this.goodsInfo[e].marketFreights[r].time=t},saveAdd:function(t,e){var r=this;return d()(o.a.mark(function a(){var n,s,i,c,l,d,u;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=r.goodsInfo[t],s=n.starLine,i=n.endLine,c=n.zFu,l=n.price,d={loadPort:s,discPort:i,freight:l,priceGain:c,cargo:e},a.prev=2,a.next=5,r.$http.addCargoInfoByCargo(d);case 5:if(0!=(u=a.sent).data.status){a.next=11;break}r.$Notice.success({desc:"保存成功"}),r.getCargoInfo(t),a.next=13;break;case 11:return r.$Notice.error({desc:u.data.msg}),a.abrupt("return",!1);case 13:a.next=19;break;case 15:throw a.prev=15,a.t0=a.catch(2),r.$Notice.error({desc:"捕获异常."}),Error(a.t0);case 19:case"end":return a.stop()}},a,r,[[2,15]])}))()},change:function(t){t.join(",")}},mounted:function(){this.getCargoInfo()}},p={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{staticClass:"card"},[r("Breadcrumb",[r("BreadcrumbItem",[t._v("市场管理")]),t._v(" "),r("BreadcrumbItem",[t._v("货物运价")])],1),t._v(" "),r("div",{staticClass:"box-container"},[r("Row",{staticClass:"row"},[r("Button",{attrs:{type:"primary"},on:{click:t.addGoods}},[t._v("添加货种")]),t._v(" "),r("Modal",{attrs:{title:"添加货种信息",width:"900"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[r("Row",{staticClass:"row"},[r("Col",{attrs:{span:"3"}},[t._v("货种")]),t._v(" "),r("Col",{attrs:{span:"10"}},[r("Input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入货种"},model:{value:t.cargo,callback:function(e){t.cargo=e},expression:"cargo"}})],1)],1),t._v(" "),t._l(t.lineArr,function(e,a){return r("Row",{key:a,staticClass:"row"},[r("Col",{attrs:{span:"3"}},[t._v("航线")]),t._v(" "),r("Col",{attrs:{span:"7"}},[r("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入起始航线"},model:{value:e.loadPort,callback:function(r){t.$set(e,"loadPort",r)},expression:"item.loadPort"}}),t._v(" "),r("span",{staticStyle:{margin:"0 10px"}},[t._v("至")]),t._v(" "),r("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入结束航线"},model:{value:e.discPort,callback:function(r){t.$set(e,"discPort",r)},expression:"item.discPort"}})],1),t._v(" "),r("Col",{attrs:{span:"1"}},[t._v("运价")]),t._v(" "),r("Col",{attrs:{span:"5"}},[r("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入运价"},model:{value:e.freight,callback:function(r){t.$set(e,"freight",r)},expression:"item.freight"}})],1),t._v(" "),r("Col",{attrs:{span:"1"}},[t._v("涨幅")]),t._v(" "),r("Col",{attrs:{span:"3"}},[r("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入涨幅"},model:{value:e.p,callback:function(r){t.$set(e,"p",r)},expression:"item.p"}})],1),t._v(" "),r("Col",{attrs:{span:"2"}},[0==a?r("Icon",{staticStyle:{"font-size":"20px"},attrs:{type:"md-add-circle"},on:{click:t.addPlus}}):t._e(),t._v(" "),a?r("Icon",{staticStyle:{"font-size":"20px"},attrs:{type:"ios-remove-circle"},on:{click:function(e){return t.minusPlus(a)}}}):t._e()],1)],1)})],2)],1),t._v(" "),r("Collapse",{staticStyle:{"margin-top":"20px",width:"100%"},attrs:{accordion:""},on:{"on-change":t.change}},t._l(t.goodsInfo,function(e,a){return r("Panel",{key:a,ref:"Panelkey",refInFor:!0,attrs:{name:e.value}},[r("span",[t._v(t._s(e.cargo))]),t._v(" "),r("Row",{staticClass:"row",attrs:{slot:"content"},slot:"content"},[r("Col",{attrs:{span:"1"}},[t._v("航线")]),t._v(" "),r("Col",{attrs:{span:"8"}},[r("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"起始航线"},model:{value:e.starLine,callback:function(r){t.$set(e,"starLine",r)},expression:"list.starLine"}}),t._v(" "),r("span",[t._v("至")]),t._v(" "),r("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"结束航线"},model:{value:e.endLine,callback:function(r){t.$set(e,"endLine",r)},expression:"list.endLine"}})],1),t._v(" "),r("Col",{attrs:{span:"1"}},[t._v("运价")]),t._v(" "),r("Col",{attrs:{span:"3"}},[r("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"请输入运价"},model:{value:e.price,callback:function(r){t.$set(e,"price",r)},expression:"list.price"}})],1),t._v(" "),r("Col",{attrs:{span:"1"}},[t._v("涨幅")]),t._v(" "),r("Col",{attrs:{span:"3"}},[r("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"请输入涨幅"},model:{value:e.zFu,callback:function(r){t.$set(e,"zFu",r)},expression:"list.zFu"}})],1),t._v(" "),r("Col",{attrs:{span:"1"}},[r("Button",{attrs:{type:"primary"},on:{click:function(r){return t.saveAdd(a,e.cargo)}}},[t._v("保存")])],1)],1),t._v(" "),r("Row",{attrs:{slot:"content"},slot:"content"},[r("table",{staticClass:"table table-row",staticStyle:{width:"100%"}},[r("tr",[r("td",[t._v("航线")]),t._v(" "),r("td",[t._v("运价")]),t._v(" "),r("td",[t._v("涨幅")]),t._v(" "),r("td",[t._v("日期")]),t._v(" "),r("td",[t._v("操作")])]),t._v(" "),t._l(e.marketFreights,function(n,s){return r("tr",{key:s},[n.isEditor?r("td",[r("Input",{staticStyle:{width:"80px"},attrs:{placeholder:"起始航线"},model:{value:n.starLine,callback:function(e){t.$set(n,"starLine",e)},expression:"item.starLine"}}),t._v(" "),r("span",{staticStyle:{margin:"0 10px"}},[t._v("至")]),t._v(" "),r("Input",{staticStyle:{width:"80px"},attrs:{placeholder:"结束航线"},model:{value:n.endLine,callback:function(e){t.$set(n,"endLine",e)},expression:"item.endLine"}})],1):r("td",[t._v(t._s(n.airway))]),t._v(" "),n.isEditor?r("td",[r("Input",{staticStyle:{width:"70px"},attrs:{placeholder:"请输入运价"},model:{value:n.freight,callback:function(e){t.$set(n,"freight",e)},expression:"item.freight"}})],1):r("td",[t._v(t._s(n.freight))]),t._v(" "),n.isEditor?r("td",[r("Input",{staticStyle:{width:"70px"},attrs:{placeholder:"请输入涨幅"},model:{value:n.priceGain,callback:function(e){t.$set(n,"priceGain",e)},expression:"item.priceGain"}})],1):r("td",[t._v(t._s(n.priceGain))]),t._v(" "),r("td",[t._v(t._s(n.createTime))]),t._v(" "),n.isEditor?r("td",[r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(r){return t.save(a,s,n.id,e.cargo)}}},[t._v("保存")])],1):r("td",[r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.handleEditor(a,s)}}},[t._v("修改")])],1)])})],2)])],1)}),1)],1)],1)},staticRenderFns:[]};var f=r("VU/8")(u,p,!1,function(t){r("wQB0")},"data-v-658b3894",null);e.default=f.exports},qyJz:function(t,e,r){"use strict";var a=r("+ZMJ"),n=r("kM2E"),s=r("sB3e"),o=r("msXi"),i=r("Mhyx"),c=r("QRG4"),l=r("fBQ2"),d=r("3fs2");n(n.S+n.F*!r("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,n,u,p=s(t),f="function"==typeof this?this:Array,v=arguments.length,h=v>1?arguments[1]:void 0,g=void 0!==h,m=0,_=d(p);if(g&&(h=a(h,v>2?arguments[2]:void 0,2)),void 0==_||f==Array&&i(_))for(r=new f(e=c(p.length));e>m;m++)l(r,m,g?h(p[m],m):p[m]);else for(u=_.call(p),r=new f;!(n=u.next()).done;m++)l(r,m,g?o(u,h,[n.value,m],!0):n.value);return r.length=m,r}})},wQB0:function(t,e){}});
//# sourceMappingURL=5.fdae955b695fb358d5b9.js.map