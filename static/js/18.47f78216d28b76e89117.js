webpackJsonp([18],{"0GlK":function(t,e){},ArMc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("woOf"),o=a.n(n),r=a("Xxa5"),s=a.n(r),l=a("exGp"),i=a.n(l),c={data:function(){return{showModal:!1,titleInfo:"添加电厂信息",powerInfo:[],powerPlantName:"",position:"",status:1,id:0,value1:"1",lat:"",lng:""}},methods:{update:function(t,e,a,n){this.titleInfo="修改电厂信息",this.showModal=!0,this.powerPlantName=e,this.lat=a,this.lng=n,this.status=2,this.id=t},deleteFun:function(t){var e=this;return i()(s.a.mark(function a(){var n,o;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n={code:t},a.prev=1,a.next=4,e.$http.deletePowerPlantInfo(n);case 4:(o=a.sent).data.status?e.$Notice.error({desc:o.data.msg}):(e.$Notice.success({desc:"删除成功."}),e.getPowerPlantInfo()),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0);case 11:case"end":return a.stop()}},a,e,[[1,8]])}))()},addPower:function(){this.titleInfo="添加电厂信息",this.showModal=!0},ok:function(){1==this.status?this.addPowerPlantInfo("",1):this.addPowerPlantInfo(this.id,2)},cancel:function(){this.lat="",this.lng="",this.powerPlantName=""},addPlus:function(){this.lineArr.push({lineStart:"",lineEnd:"",linePrice:""})},minusPlus:function(t){this.lineArr.splice(t,1)},getPowerPlantInfo:function(){var t=this;return i()(s.a.mark(function e(){var a,n,r,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.getPowerPlantInfo();case 3:if(a=e.sent,t.powerInfo=[],n=a.data.result,0==a.data.status&&a.data.result instanceof Array){for(r in n)for(l in n[r].powerPlantDailyInfo)n[r].powerPlantDailyInfo[l].isEditor=!1;n.map(function(e,a){t.powerInfo.push(o()({},e,{value:a+1+"",dailyConsumption:"",powerPlantDailyInfoId:"",reserve:"",isCollapse:!1}))})}e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,t,[[0,9]])}))()},contains:function(t,e,a){a&&(t=t.toLowerCase(),e=e.toLowerCase());for(var n=e.substring(0,1),o=e.length,r=0;r<t.length-o+1;r++)if(t.charAt(r)==n&&t.substring(r,r+o)==e)return!0;return!1},addPowerPlantInfo:function(t,e){var a=this;return i()(s.a.mark(function n(){var o,r,l;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o={powerPlantName:a.powerPlantName,position:a.lng+","+a.lat,powerPlantCode:t},n.prev=1,n.next=4,a.$http.addPowerPlantInfo(o);case 4:0==(r=n.sent).data.status?(l=1==e?"添加成功":"修改成功",a.$Notice.success({desc:l}),2==e&&(a.status=1,a.id=0),a.powerPlantName="",a.position="",a.lat="",a.lng="",a.getPowerPlantInfo()):a.$Notice.error({desc:r.data.msg}),1==e&&(a.powerPlantName="",a.position="",a.lat="",a.lng=""),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(1);case 11:case"end":return n.stop()}},n,a,[[1,9]])}))()},handleEditor:function(t,e){this.powerInfo[t].powerPlantDailyInfo[e].isEditor=!0},save:function(t,e,a){var n=this;return i()(s.a.mark(function o(){var r,l,i,c,p,u,d,v,f;return s.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r=void 0,"save"==a?(l=n.powerInfo[e],i=l.dailyConsumption,c=l.reserve,r={dailyConsumption:i,reserve:c,powerPlantCode:t,powerPlantDailyCode:""}):(p=n.powerInfo[e].powerPlantDailyInfo[a],u=p.dailyConsumption,d=p.reserve,v=p.dailyCode,r={dailyConsumption:u,reserve:d,powerPlantCode:t,powerPlantDailyCode:v}),o.prev=2,o.next=5,n.$http.addPowerPlantDailyInfo(r);case 5:0==(f=o.sent).data.status?(n.$Notice.success({desc:"保存成功."}),"save"==a&&(n.powerInfo[e].dailyConsumption="",n.powerInfo[e].reserve=""),n.getPowerPlantInfo()):n.$Notice.error({desc:f.data.msg}),o.next=11;break;case 9:o.prev=9,o.t0=o.catch(2);case 11:case"end":return o.stop()}},o,n,[[2,9]])}))()},deleteFn:function(t){var e=this;return i()(s.a.mark(function a(){var n,o;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n={code:t},a.prev=1,a.next=4,e.$http.deletePowerPlantDailyInfo(n);case 4:(o=a.sent).data.status?e.$Notice.error({desc:o.data.msg}):(e.$Notice.success({desc:"删除成功."}),e.getPowerPlantInfo()),a.next=10;break;case 8:a.prev=8,a.t0=a.catch(1);case 10:case"end":return a.stop()}},a,e,[[1,8]])}))()}},created:function(){this.getPowerPlantInfo()}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",{staticClass:"card"},[a("Breadcrumb",[a("BreadcrumbItem",[t._v("市场管理")]),t._v(" "),a("BreadcrumbItem",[t._v("货物供需")])],1),t._v(" "),a("div",{staticClass:"box-container"},[a("Row",{staticClass:"row"},[a("Button",{attrs:{type:"primary"},on:{click:t.addPower}},[t._v("添加电厂")]),t._v(" "),a("Modal",{attrs:{title:t.titleInfo,width:"430"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Row",{staticClass:"row"},[a("Col",{attrs:{span:"4"}},[t._v("电厂名称")]),t._v(" "),a("Col",{attrs:{span:"10"}},[a("Input",{staticStyle:{width:"255px"},attrs:{placeholder:"请输入电厂名称"},model:{value:t.powerPlantName,callback:function(e){t.powerPlantName=e},expression:"powerPlantName"}})],1)],1),t._v(" "),a("Row",{staticClass:"row"},[a("Col",{attrs:{span:"4"}},[t._v("经度")]),t._v(" "),a("Col",{attrs:{span:"7"}},[a("Input",{staticStyle:{width:"90px"},attrs:{placeholder:"请输入经度"},model:{value:t.lng,callback:function(e){t.lng=e},expression:"lng"}})],1),t._v(" "),a("Col",{attrs:{span:"3"}},[t._v("纬度")]),t._v(" "),a("Col",{attrs:{span:"4"}},[a("Input",{staticStyle:{width:"90px"},attrs:{placeholder:"请输入纬度"},model:{value:t.lat,callback:function(e){t.lat=e},expression:"lat"}})],1)],1)],1)],1),t._v(" "),a("Collapse",{staticStyle:{"margin-top":"20px",width:"80%"},attrs:{accordion:""},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}},t._l(t.powerInfo,function(e,n){return a("Panel",{key:n,attrs:{name:String(n)}},[a("span",[t._v("电厂:"+t._s(e.powerPlantName))]),t._v(" "),a("span",{staticClass:"loaction"},[t._v("坐标:"+t._s(e.lng)+" ,"+t._s(e.lat))]),t._v(" "),a("Button",{staticClass:"update",attrs:{type:"primary",size:"small"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.update(e.powerPlantCode,e.powerPlantName,e.lat,e.lng)}}},[t._v("修改")]),t._v(" "),a("Button",{staticClass:"delete",attrs:{type:"warning",size:"small"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.deleteFun(e.powerPlantCode)}}},[t._v("删除")]),t._v(" "),a("Row",{staticClass:"row ",attrs:{slot:"content"},slot:"content"},[a("Col",{attrs:{span:"1"}},[t._v("日耗")]),t._v(" "),a("Col",{attrs:{span:"10"}},[a("Input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入日耗"},model:{value:e.dailyConsumption,callback:function(a){t.$set(e,"dailyConsumption",a)},expression:"list.dailyConsumption"}}),t._v(" 元/吨")],1),t._v(" "),a("Col",{attrs:{span:"1"}},[t._v("库存")]),t._v(" "),a("Col",{attrs:{span:"10"}},[a("Input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入库存"},model:{value:e.reserve,callback:function(a){t.$set(e,"reserve",a)},expression:"list.reserve"}}),t._v(" "),a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.save(e.powerPlantCode,n,"save")}}},[t._v("保存")])],1)],1),t._v(" "),a("Row",{attrs:{slot:"content"},slot:"content"},[a("table",{staticClass:"table table-row"},[a("tr",[a("td",[t._v("#")]),t._v(" "),a("td",[t._v("日耗")]),t._v(" "),a("td",[t._v("库存")]),t._v(" "),a("td",[t._v("操作")])]),t._v(" "),t._l(e.powerPlantDailyInfo,function(o,r){return a("tr",{key:r},[a("td",[t._v(t._s(r+1))]),t._v(" "),o.isEditor?a("td",[a("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入日耗"},model:{value:o.dailyConsumption,callback:function(e){t.$set(o,"dailyConsumption",e)},expression:"key.dailyConsumption"}})],1):a("td",[t._v(t._s(o.dailyConsumption))]),t._v(" "),o.isEditor?a("td",[a("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入库存"},model:{value:o.reserve,callback:function(e){t.$set(o,"reserve",e)},expression:"key.reserve"}})],1):a("td",[t._v(t._s(o.reserve))]),t._v(" "),o.isEditor?a("td",[a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.save(e.powerPlantCode,n,r)}}},[t._v("保存")])],1):a("td",[a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleEditor(n,r)}}},[t._v("修改")]),t._v(" "),a("Button",{attrs:{type:"warning",size:"small"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteFn(o.dailyCode)}}},[t._v("删除")])],1)])})],2)])],1)}),1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,p,!1,function(t){a("0GlK")},"data-v-075069be",null);e.default=u.exports}});
//# sourceMappingURL=18.47f78216d28b76e89117.js.map