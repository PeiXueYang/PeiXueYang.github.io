webpackJsonp([10],{NMf5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("woOf"),r=a.n(n),o=a("Xxa5"),s=a.n(o),i=a("exGp"),c=a.n(i),l={data:function(){return{value100:"1",showModal:!1,platform:[],oilType:"",oilPrice:"",providerInfo:[],companyName:"",title:"添加供应商",status:1,id:"",values:"1"}},methods:{update:function(e){this.platform[e].isEditor=!0},addShopper:function(){this.showModal=!0,this.status=1,this.title="添加供应商",localStorage.removeItem("content")},addOil:function(e){this.providerInfo[e].oilArr.push({price:"",fuelType:""})},minusOil:function(e){this.providerInfo[e].oilArr.splice(e,1)},ok:function(e,t){1==this.status?this.addFuelComapany():this.addFuelComapany(this.companyName,this.id,"update")},cancel:function(){this.companyName=""},getPlatformFuelPriceInfo:function(){var e=this;return c()(s.a.mark(function t(){var a,n,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.getPlatformFuelPriceInfo();case 2:if(a=t.sent,e.platform=[],n=a.data.result,!a.data.status&&a.data.result instanceof Array){for(r in n)n[r].isEditor=!1;e.platform=n}case 6:case"end":return t.stop()}},t,e)}))()},save:function(e){var t=this;return c()(s.a.mark(function a(){var n,r,o,i,c,l,u;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=void 0,"save"==e?(r={fuelType:t.oilType,price:t.oilPrice},n=r):(o=t.platform[e],i=o.fuelType,c=o.price,n={fuelType:i,price:c}),a.next=4,t.$http.addPlatformPrice(n);case 4:if(0!=(l=a.sent).data.status){a.next=16;break}if(u="save"==e?"保存成功":"修改成功",t.$Notice.success({desc:u}),t.getPlatformFuelPriceInfo(),t.oilPrice="",t.oilType="","save"!=e){a.next=13;break}return a.abrupt("return");case 13:t.platform[e].isEditor=!1,a.next=17;break;case 16:t.$Notice.error({desc:l.data.msg});case 17:case"end":return a.stop()}},a,t)}))()},getFuelComapanyPriceInfo:function(){var e=this;return c()(s.a.mark(function t(){var a,n,o,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.getFuelComapanyPriceInfo();case 2:if(a=t.sent,e.providerInfo=[],n=a.data.result,!a.data.status){for(o in n)for(i in n[o].fuelCompanyPrices)n[o].fuelCompanyPrices[i].isEditor=!1,n[o].fuelCompanyPrices[i].date=n[o].fuelCompanyPrices[i].createTime?n[o].fuelCompanyPrices[i].createTime.split(" ")[0]:"",n[o].fuelCompanyPrices[i].time=n[o].fuelCompanyPrices[i].createTime?n[o].fuelCompanyPrices[i].createTime.split(" ")[1]:"";n.map(function(t,a){e.providerInfo.push(r()({},t,{value:a+1+"",oilArr:[{fuelType:"",price:""}],isCollapse:!1}))})}case 6:case"end":return t.stop()}},t,e)}))()},handleDate:function(e,t,a,n){"date"==n?this.providerInfo[t].fuelCompanyPrices[a].date=e:this.providerInfo[t].fuelCompanyPrices[a].time=e},updateFn:function(e,t){this.providerInfo[e].fuelCompanyPrices[t].isEditor=!0},saveFn:function(e,t,a){var n=this;return c()(s.a.mark(function r(){var o,i,c,l,u;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=n.providerInfo[e].fuelCompanyPrices[t],i=o.fuelType,c=o.price,l={fuelType:i,price:c,fuelCompanyPriceCode:a},r.next=4,n.$http.updateFuelComapanyPrice(l);case 4:(u=r.sent).data.status?n.$Notice.success({desc:u.data.msg}):(n.$Notice.success({desc:"修改成功"}),n.providerInfo[e].fuelCompanyPrices[t].isEditor=!1,n.getFuelComapanyPriceInfo());case 6:case"end":return r.stop()}},r,n)}))()},newSave:function(e,t){var a=this;return c()(s.a.mark(function n(){var r,o,i;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.providerInfo[e].oilArr,o={fuelCompanyPrice:r,fuelCompanyCode:t},n.next=4,a.$http.addFuelComapanyPrice(o);case 4:(i=n.sent).data.status?a.$Notice.error({desc:i.data.msg}):(a.$Notice.success({desc:"保存成功"}),a.getFuelComapanyPriceInfo());case 6:case"end":return n.stop()}},n,a)}))()},addFuelComapany:function(e,t,a){var n=this;return c()(s.a.mark(function e(){var r,o,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.companyName!=localStorage.content){e.next=4;break}return n.$Notice.error({desc:"修改供应商内容与原内容相同，请重新输入."}),n.companyName="",e.abrupt("return",!1);case 4:return r={companyName:n.companyName,fuelCompanyCode:t||""},n.companyName="",e.next=8,n.$http.addFuelComapany(r);case 8:o=e.sent,console.log(o),o.data.status?n.$Notice.error({desc:o.data.msg}):(i=a?"修改成功":"添加成功",n.$Notice.success({desc:i}),n.companyName="",n.getFuelComapanyPriceInfo());case 11:case"end":return e.stop()}},e,n)}))()},updatefuns:function(e,t){this.showModal=!0,this.companyName=e,this.title="修改供应商",this.status=2,this.id=t,localStorage.setItem("content",e)},deleteFun:function(e){var t=this;return c()(s.a.mark(function a(){var n,r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n={fuelCompanyCode:e},a.next=3,t.$http.deleteFuelComapany(n);case 3:(r=a.sent).data.status?t.$Notice.error({desc:r.data.msg}):(t.$Notice.success({desc:"删除成功"}),t.getFuelComapanyPriceInfo());case 5:case"end":return a.stop()}},a,t)}))()},deleteFns:function(e){var t=this;return c()(s.a.mark(function a(){var n,r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n={fuelComapanyPriceCode:e},a.next=3,t.$http.deleteFuelComapanyPrice(n);case 3:(r=a.sent).data.status?t.$Notice.error({desc:r.data.msg}):(t.$Notice.success({desc:"删除成功"}),t.getFuelComapanyPriceInfo());case 5:case"end":return a.stop()}},a,t)}))()}},created:function(){this.getPlatformFuelPriceInfo(),this.getFuelComapanyPriceInfo()}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Card",{staticClass:"card"},[a("Breadcrumb",[a("BreadcrumbItem",[e._v("市场管理")]),e._v(" "),a("BreadcrumbItem",[e._v("油价")])],1),e._v(" "),a("div",{staticClass:"box-container"},[a("Collapse",{staticStyle:{margin:"20px 0",width:"80%"},attrs:{accordion:""},model:{value:e.value100,callback:function(t){e.value100=t},expression:"value100"}},[a("Panel",{attrs:{name:"1"}},[a("span",[e._v("平台油价信息")]),e._v(" "),a("Row",{staticClass:"row",attrs:{slot:"content"},slot:"content"},[a("Col",{attrs:{span:"2"}},[e._v("油型种类")]),e._v(" "),a("Col",{attrs:{span:"10"}},[a("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入油型种类"},model:{value:e.oilType,callback:function(t){e.oilType=t},expression:"oilType"}})],1),e._v(" "),a("Col",{attrs:{span:"2"}},[e._v("油型油价")]),e._v(" "),a("Col",{attrs:{span:"10"}},[a("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入油价"},model:{value:e.oilPrice,callback:function(t){e.oilPrice=t},expression:"oilPrice"}}),e._v(" "),a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.save("save")}}},[e._v("保存")])],1)],1),e._v(" "),a("Row",{attrs:{slot:"content"},slot:"content"},[a("table",{staticClass:"table table-row",staticStyle:{width:"70%"}},[a("tr",[a("td",[e._v("油型种类")]),e._v(" "),a("td",[e._v("油价")]),e._v(" "),a("td",[e._v("操作")])]),e._v(" "),e._l(e.platform,function(t,n){return a("tr",{key:n},[t.isEditor?a("td",[a("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入油型种类"},model:{value:t.fuelType,callback:function(a){e.$set(t,"fuelType",a)},expression:"list.fuelType"}})],1):a("td",[e._v(e._s(t.fuelType))]),e._v(" "),t.isEditor?a("td",[a("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入油价"},model:{value:t.price,callback:function(a){e.$set(t,"price",a)},expression:"list.price"}})],1):a("td",[e._v(e._s(t.price))]),e._v(" "),t.isEditor?a("td",[a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.save(n)}}},[e._v(" 保存")])],1):a("td",[a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.update(n,t.code)}}},[e._v(" 修改")])],1)])})],2)])],1)],1),e._v(" "),a("Row",{staticClass:"row"},[a("Button",{attrs:{type:"primary"},on:{click:e.addShopper}},[e._v("添加供应商")]),e._v(" "),a("Modal",{attrs:{title:e.title},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[a("Row",{staticClass:"row"},[a("Col",{attrs:{span:"3"}},[e._v("供应商")]),e._v(" "),a("Col",{attrs:{span:"10"}},[a("Input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入供应商"},model:{value:e.companyName,callback:function(t){e.companyName=t},expression:"companyName"}})],1)],1)],1)],1),e._v(" "),a("Collapse",{staticStyle:{"margin-top":"20px",width:"80%"},attrs:{accordion:""},model:{value:e.values,callback:function(t){e.values=t},expression:"values"}},e._l(e.providerInfo,function(t,n){return a("Panel",{key:n,attrs:{name:t.value}},[a("span",[e._v(e._s(t.companyName))]),e._v(" "),a("Button",{staticClass:"update",attrs:{type:"primary",size:"small"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),e.updatefuns(t.companyName,t.fuelCompanyCode)}}},[e._v("修改")]),e._v(" "),a("Button",{staticClass:"delete",attrs:{type:"warning",size:"small"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),e.deleteFun(t.fuelCompanyCode)}}},[e._v("删除")]),e._v(" "),e._l(t.oilArr,function(r,o){return a("Row",{key:o,staticClass:"row",attrs:{slot:"content"},slot:"content"},[a("Col",{attrs:{span:"2"}},[e._v("   "+e._s(0==o?"油型种类":" ")+"  ")]),e._v(" "),a("Col",{attrs:{span:"10"}},[a("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入油型种类"},model:{value:r.fuelType,callback:function(t){e.$set(r,"fuelType",t)},expression:"item.fuelType"}})],1),e._v(" "),a("Col",{attrs:{span:"2"}},[e._v(" "+e._s(0==o?"油型油价":" "))]),e._v(" "),a("Col",{attrs:{span:"10"}},[a("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入油价"},model:{value:r.price,callback:function(t){e.$set(r,"price",t)},expression:"item.price"}}),e._v(" "),0==o?a("Icon",{staticStyle:{"font-size":"20px"},attrs:{type:"md-add-circle"},on:{click:function(t){return e.addOil(n)}}}):e._e(),e._v(" "),o?a("Icon",{staticStyle:{"font-size":"20px"},attrs:{type:"ios-remove-circle"},on:{click:function(t){return e.minusOil(n)}}}):e._e(),e._v(" "),o?e._e():a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.newSave(n,t.fuelCompanyCode)}}},[e._v("保存")])],1)],1)}),e._v(" "),a("Row",{attrs:{slot:"content"},slot:"content"},[a("table",{staticClass:"table table-row",staticStyle:{width:"90%"}},[a("tr",[a("td",[e._v("#")]),e._v(" "),a("td",[e._v("油型种类")]),e._v(" "),a("td",[e._v("油价")]),e._v(" "),a("td",[e._v("日期")]),e._v(" "),a("td",[e._v("操作")])]),e._v(" "),e._l(t.fuelCompanyPrices,function(t,r){return a("tr",{key:r},[a("td",[e._v(e._s(r+1))]),e._v(" "),t.isEditor?a("td",[a("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入油型种类"},model:{value:t.fuelType,callback:function(a){e.$set(t,"fuelType",a)},expression:"key.fuelType"}})],1):a("td",[e._v(e._s(t.fuelType))]),e._v(" "),t.isEditor?a("td",[a("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入油价"},model:{value:t.price,callback:function(a){e.$set(t,"price",a)},expression:"key.price"}})],1):a("td",[e._v(e._s(t.price))]),e._v(" "),a("td",[e._v(e._s(t.createTime))]),e._v(" "),t.isEditor?a("td",[a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.saveFn(n,r,t.code)}}},[e._v("保存")])],1):a("td",[a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.updateFn(n,r)}}},[e._v("修改")]),e._v(" "),a("Button",{attrs:{type:"warning",size:"small"},on:{click:function(a){return e.deleteFns(t.code)}}},[e._v("删除")])],1)])})],2)])],2)}),1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(l,u,!1,function(e){a("quZd")},"data-v-6742c494",null);t.default=p.exports},quZd:function(e,t){}});
//# sourceMappingURL=10.be6a736e055dd008ec0d.js.map