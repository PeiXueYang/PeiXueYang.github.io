webpackJsonp([1],{OMZp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),s=a("exGp"),i=a.n(s),c={data:function(){var e=this;return{name:"",columns1:[{title:"#",key:"Index",align:"center",width:70},{title:"船名",key:"shipName",align:"center",width:200},{title:"船东",key:"name",align:"center",width:170},{title:"mmsi",key:"mmsi",align:"center",width:170},{title:"船长",key:"shipLong",align:"center"},{title:"船宽",key:"shipWidth",align:"center"},{title:"载重吨位",key:"zTons",align:"center"},{title:"证书吨位",key:"bookTons",align:"center"},{title:"TPC",key:"TPC",align:"center"},{title:"详情",key:"detail",align:"center",render:function(t,a){return t("Button",{props:{type:"primary"},style:{display:"inline-block",width:100,background:"red;"},on:{click:function(){var t=e.$router.resolve({path:"/shipCenter/shipdetail",query:{code:a.row.code}});window.open(t.href,"_blank")}}},"查看")}}],data1:[],currentPage:1,size:10,total:20}},methods:{shipList:function(){var e=this;return i()(r.a.mark(function t(){var a,n,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={currentPage:e.currentPage,size:e.size},t.prev=1,t.next=4,e.$http.shipList(a);case 4:0==(n=t.sent).data.status&&n.data.result instanceof Array?(e.total=n.data.total,s=n.data.result,e.data1=[],e.commonFn(s)):(e.$Notice.error({desc:"暂无数据"}),e.data1=[],e.total=0),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(1),e.$Notice.error({desc:"服务器错误,请稍后重试."}),Error(t.t0);case 12:case"end":return t.stop()}},t,e,[[1,8]])}))()},commonFn:function(e){var t=this;e.forEach(function(e,a){t.data1.push({Index:Number((t.currentPage-1)*t.size)+Number(a)+1,shipName:e.shipnameCn||e.shipnameEn,name:(e.contactName||"")+"/"+(e.contactPhone||""),mmsi:e.mmsi,shipLong:e.length,shipWidth:e.breadth,zTons:e.loadTons,bookTons:e.certTons,TPC:e.tpc,id:e.shipId,code:e.code,detail:"查看"})})},changePage:function(e){this.currentPage=e,localStorage.searchInfo?this.search(e):this.shipList()},sizeChange:function(e){this.size=e,this.name?this.search():this.shipList()},search:function(e){var t=this;return i()(r.a.mark(function a(){var n,s,i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t.name){a.next=3;break}return t.$Notice.error({desc:"请输入船名"}),a.abrupt("return",!1);case 3:return t.currentPage=e||1,n={currentPage:t.currentPage,size:t.size,trem:t.name},a.prev=5,a.next=8,t.$http.selectShipInfo(n);case 8:if(s=a.sent,t.total=s.data.total,t.data1=[],s.data.status||!(s.data.result instanceof Array)){a.next=18;break}localStorage.setItem("searchInfo",t.name),t.$Notice.success({desc:"查询成功"}),i=s.data.result,t.commonFn(i),a.next=20;break;case 18:return t.$Notice.error({desc:"暂无数据"}),a.abrupt("return",!1);case 20:a.next=27;break;case 22:throw a.prev=22,a.t0=a.catch(5),localStorage.removeItem("searchInfo"),t.$Notice.error({desc:"服务器错误,请稍后重试."}),Error(a.t0);case 27:case"end":return a.stop()}},a,t,[[5,22]])}))()}},created:function(){this.shipList()},watch:{name:function(){this.name||(this.size=10,this.shipList(),localStorage.removeItem("searchInfo"))}},destroyed:function(){localStorage.removeItem("searchInfo")}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Card",{staticClass:"card"},[a("Breadcrumb",[a("BreadcrumbItem",[e._v("船舶中心")]),e._v(" "),a("BreadcrumbItem",[e._v("船舶列表")])],1),e._v(" "),a("div",{staticClass:"box-container"},[a("div",{staticStyle:{margin:"20px 0 40px 0"}},[a("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入船名/mmsi"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.search()}}},[e._v("搜索")])],1),e._v(" "),a("Table",{attrs:{border:"",columns:e.columns1,data:e.data1}}),e._v(" "),a("Page",{staticClass:"pages",attrs:{total:e.total,"show-elevator":"","show-sizer":"",current:e.currentPage,"page-size":e.size},on:{"on-change":e.changePage,"on-page-size-change":e.sizeChange}})],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,o,!1,function(e){a("zBTN")},"data-v-52040e21",null);t.default=u.exports},zBTN:function(e,t){}});
//# sourceMappingURL=1.f02c478d69fe3b3bb437.js.map